<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bingo Blackjack EV Calculator</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; line-height: 1.6; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; }
        select, input { width: 100%; padding: 8px; margin-top: 5px; }
        #results { margin-top: 20px; padding: 15px; border-radius: 8px; background: #f4f4f4; }
        .optimal { color: green; font-weight: bold; }
    </style>
</head>
<body>
    <h2>Bingo Blackjack EV Calculator</h2>
    <p><i>DraftKings Version Dis.A_1.1</i></p>

    <div class="input-group">
        <label>Bingo Multiplier:</label>
        <select id="multiplier">
            <option value="2">2x</option>
            <option value="5">5x</option>
            <option value="10">10x</option>
            <option value="25">25x</option>
            <option value="50">50x</option>
            <option value="100">100x</option>
        </select>
    </div>

    <div class="input-group">
        <label>Target Hand Value:</label>
        <input type="number" id="target" value="21" min="12" max="21">
    </div>

    <div class="input-group">
        <label>Player Card 1 (Value):</label>
        <input type="number" id="p1" value="10" min="2" max="11">
    </div>

    <div class="input-group">
        <label>Player Card 2 (Value):</label>
        <input type="number" id="p2" value="6" min="2" max="11">
    </div>

    <div class="input-group">
        <label>Dealer Upcard (Value):</label>
        <input type="number" id="upcard" value="10" min="2" max="11">
    </div>

    <button onclick="calculateEV()">Calculate EV</button>

    <div id="results" style="display:none;">
        <h3>EV Analysis (Per $1.00 Wagered)</h3>
        <p id="ev-stand"></p>
        <p id="ev-hit"></p>
        <p id="ev-double"></p>
        <p id="ev-surrender"></p>
        <hr>
        <p id="recommendation"></p>
    </div>

    <script>
        function calculateEV() {
            const mult = parseFloat(document.getElementById('multiplier').value);
            const target = parseInt(document.getElementById('target').value);
            const pSum = parseInt(document.getElementById('p1').value) + parseInt(document.getElementById('p2').value);
            const dealer = parseInt(document.getElementById('upcard').value);
            const fee = 0.20; // 20% Bingo Activator Fee

            // Simplified Probability Model for 8-deck shoe
            const dealerProb = { bust: 0.24, 17: 0.13, 18: 0.13, 19: 0.13, 20: 0.18, 21: 0.19 };
            
            // 1. STAND EV
            let standEV = 0;
            if (pSum > 21) standEV = -1.0;
            else {
                // Win if dealer busts or player > dealer
                let winProb = dealerProb.bust;
                for (let v = 17; v < pSum; v++) winProb += dealerProb[v] || 0;
                
                let pushProb = dealerProb[pSum] || 0;
                let lossProb = 1 - winProb - pushProb;

                // Apply Bingo Multiplier if pSum matches target
                const winPay = (pSum === target) ? mult : 1.0;
                standEV = (winProb * winPay) + (pushProb * 0) - (lossProb * 1.0);
            }
            standEV -= fee; // Account for Bingo fee

            // 2. HIT EV (Simplified to 1-card hit)
            const hitEV = (standEV * 0.95); // Approximation for standard hit risk

            // 3. DOUBLE EV
            const doubleEV = (standEV * 1.8); // 2x bet, reduced by 1-card restriction

            // 4. SURRENDER EV
            const surrenderEV = -0.50 - fee; // Lose half bet + full fee

            // UI Display
            document.getElementById('results').style.display = 'block';
            document.getElementById('ev-stand').innerText = "Stand EV: " + standEV.toFixed(4);
            document.getElementById('ev-hit').innerText = "Hit EV: ~" + hitEV.toFixed(4);
            document.getElementById('ev-double').innerText = "Double EV: ~" + doubleEV.toFixed(4);
            document.getElementById('ev-surrender').innerText = "Surrender EV: " + surrenderEV.toFixed(4);

            const evs = { "Stand": standEV, "Hit": hitEV, "Double": doubleEV, "Surrender": surrenderEV };
            const best = Object.keys(evs).reduce((a, b) => evs[a] > evs[b] ? a : b);
            document.getElementById('recommendation').innerHTML = `Optimal Action: <span class="optimal">${best}</span>`;
        }
    </script>
</body>
</html>